<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get stop times patterns — get_stop_times_patterns • gtfstools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get stop times patterns — get_stop_times_patterns"><meta property="og:description" content='Identifies spatial and spatiotemporal patterns within the stop_times
table. Please see the details to understand what a "pattern" means in each of
these cases.'><meta property="og:image" content="/logo.png"><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gtfstools</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/gtfstools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/filtering.html">Filtering GTFS feeds</a>
    </li>
    <li>
      <a href="../articles/validating.html">Validating GTFS feeds</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ipeaGIT/gtfstools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get stop times patterns</h1>
    <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/gtfstools/blob/master/R/get_stop_times_patterns.R" class="external-link"><code>R/get_stop_times_patterns.R</code></a></small>
    <div class="hidden name"><code>get_stop_times_patterns.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Identifies spatial and spatiotemporal patterns within the <code>stop_times</code>
table. Please see the details to understand what a "pattern" means in each of
these cases.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_stop_times_patterns</span><span class="op">(</span></span>
<span>  <span class="va">gtfs</span>,</span>
<span>  trip_id <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"spatial"</span>,</span>
<span>  sort_sequence <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-gtfs">gtfs<a class="anchor" aria-label="anchor" href="#arg-gtfs"></a></dt>
<dd><p>A GTFS object, as created by <code><a href="read_gtfs.html">read_gtfs()</a></code>.</p></dd>


<dt id="arg-trip-id">trip_id<a class="anchor" aria-label="anchor" href="#arg-trip-id"></a></dt>
<dd><p>A character vector including the <code>trip_id</code>s to have their
<code>stop_times</code> entries analyzed. If <code>NULL</code> (the default), the function
analyses the pattern of every <code>trip_id</code> in the GTFS.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>A string specifying the type of patterns to be analyzed. Either
<code>"spatial"</code> (the default) or "spatiotemporal".</p></dd>


<dt id="arg-sort-sequence">sort_sequence<a class="anchor" aria-label="anchor" href="#arg-sort-sequence"></a></dt>
<dd><p>A logical specifying whether to sort timetables by
<code>stop_sequence</code>. Defaults to <code>FALSE</code>, otherwise spec-compliant feeds, in
which timetables points are already ordered by <code>stop_sequence</code>, would be
penalized through longer processing times. Pattern identification based on
unordered timetables may result in multiple ids identifying what would be
the same pattern, had the table been ordered.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A <code>data.table</code> associating each <code>trip_id</code> to a <code>pattern_id</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>


<p>Two trips are assigned to the same spatial <code>pattern_id</code> if they travel along
the same sequence of stops. They are assigned to the same spatiotemporal
<code>pattern_id</code>, on the other hand, if they travel along the same sequence of
stops and they take the same time between stops. Please note that, in such
case, only the time between stops is taken into account, and the time that
the trip started is ignored (e.g. if two trips depart from stop A and follow
the same sequence of stops to arrive at stop B, taking both 1 hour to do so,
their spatiotemporal pattern will be considered the same, even if one
departed at 6 am and another at 7 am). Please also note that the
<code>stop_sequence</code> field is currently ignored - which means that two stops are
considered to follow the same sequence if one is listed right below the
other on the <code>stop_times</code> table (e.g. if trip X lists stops A followed by
stop B with <code>stop_sequence</code>s 1 and 2, and trip Y lists stops A followed by
stop B with <code>stop_sequence</code>s 1 and 3, they are assigned to the same
<code>pattern_id</code>).</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/ber_gtfs.zip"</span>, package <span class="op">=</span> <span class="st">"gtfstools"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">gtfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_gtfs.html">read_gtfs</a></span><span class="op">(</span><span class="va">data_path</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">patterns</span> <span class="op">&lt;-</span> <span class="fu">get_stop_times_patterns</span><span class="op">(</span><span class="va">gtfs</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">patterns</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;trip_id&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      trip_id pattern_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;char&gt;      &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 143765655          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 143765656          2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 143765658          3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: 143765659          3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: 143765660          3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: 143765661          3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use the trip_id argument to control which trips are analyzed</span></span></span>
<span class="r-in"><span><span class="va">patterns</span> <span class="op">&lt;-</span> <span class="fu">get_stop_times_patterns</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gtfs</span>,</span></span>
<span class="r-in"><span>  trip_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"143765658"</span>, <span class="st">"143765659"</span>, <span class="st">"143765660"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">patterns</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;trip_id&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      trip_id pattern_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;char&gt;      &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 143765658          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 143765659          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 143765660          1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use the type argument to control the type of pattern analyzed</span></span></span>
<span class="r-in"><span><span class="va">patterns</span> <span class="op">&lt;-</span> <span class="fu">get_stop_times_patterns</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gtfs</span>,</span></span>
<span class="r-in"><span>  trip_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"143765658"</span>, <span class="st">"143765659"</span>, <span class="st">"143765660"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"spatiotemporal"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">patterns</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;trip_id&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      trip_id pattern_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;char&gt;      &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: 143765658          1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: 143765659          2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: 143765660          2</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Daniel Herszenhut, Rafael H. M. Pereira, Pedro R. Andrade, Joao Bazzo, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

