<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Filter GTFS object by weekday — filter_by_weekday • gtfstools</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Filter GTFS object by weekday — filter_by_weekday"><meta property="og:description" content="Filters a GTFS object by weekday, keeping (or dropping) the relevant entries
in each file."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gtfstools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/gtfstools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/filtering.html">Filtering GTFS feeds</a>
    </li>
    <li>
      <a href="../articles/validating.html">Validating GTFS feeds</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ipeaGIT/gtfstools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Filter GTFS object by weekday</h1>
    <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/gtfstools/blob/HEAD/R/filter_by_weekday.R" class="external-link"><code>R/filter_by_weekday.R</code></a></small>
    <div class="hidden name"><code>filter_by_weekday.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Filters a GTFS object by weekday, keeping (or dropping) the relevant entries
in each file.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">filter_by_weekday</span><span class="op">(</span><span class="va">gtfs</span>, <span class="va">weekday</span>, combine <span class="op">=</span> <span class="st">"or"</span>, keep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>gtfs</dt>
<dd><p>A GTFS object, as created by <code><a href="read_gtfs.html">read_gtfs()</a></code>.</p></dd>


<dt>weekday</dt>
<dd><p>A character vector. The weekdays used to filter the data.
Possible values are <code>c("monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday")</code>.</p></dd>


<dt>combine</dt>
<dd><p>A string. Specifies which logic operation (OR or AND) should
be used to filter the calendar table when multiple weekdays are specified.
Defaults to <code>"or"</code>. Please check the details and examples sections for more
information on this argument usage.</p></dd>


<dt>keep</dt>
<dd><p>A logical. Whether the entries related to the specified weekdays
should be kept or dropped (defaults to <code>TRUE</code>, which keeps the entries).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The GTFS object passed to the <code>gtfs</code> parameter, after the filtering
process.</p>
    </div>
    <div id="combine-usage">
    <h2><code>combine</code> usage</h2>
    <p>When filtering the calendar table using weekdays, one could reason about the
process in different ways. For example, you may want to keep only services
who run on mondays AND tuesdays. Or you may want to keep services that run
EITHER on mondays OR on tuesdays. The first case is the equivalent of
filtering using the expression <code>monday == 1 &amp; tuesday == 1</code>, while the second
uses <code>monday == 1 | tuesday == 1</code>. You can use the <code>combine</code> argument to
control this behaviour.</p>
<p>Please note that <code>combine</code> also works together with <code>keep</code>. Using the same
examples listed above, you could either keep the entries related to services
that run on mondays and tuesdays or drop them, depending on the value you
pass to <code>keep</code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other filtering functions: 
<code><a href="filter_by_agency_id.html">filter_by_agency_id</a>()</code>,
<code><a href="filter_by_route_id.html">filter_by_route_id</a>()</code>,
<code><a href="filter_by_route_type.html">filter_by_route_type</a>()</code>,
<code><a href="filter_by_service_id.html">filter_by_service_id</a>()</code>,
<code><a href="filter_by_sf.html">filter_by_sf</a>()</code>,
<code><a href="filter_by_shape_id.html">filter_by_shape_id</a>()</code>,
<code><a href="filter_by_stop_id.html">filter_by_stop_id</a>()</code>,
<code><a href="filter_by_time_of_day.html">filter_by_time_of_day</a>()</code>,
<code><a href="filter_by_trip_id.html">filter_by_trip_id</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># read gtfs</span></span></span>
<span class="r-in"><span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/spo_gtfs.zip"</span>, package <span class="op">=</span> <span class="st">"gtfstools"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gtfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_gtfs.html">read_gtfs</a></span><span class="op">(</span><span class="va">data_path</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/object.size.html" class="external-link">object.size</a></span><span class="op">(</span><span class="va">gtfs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 811304 bytes</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># keeps entries related to services than run EITHER on monday OR on sunday</span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span> <span class="op">&lt;-</span> <span class="fu">filter_by_weekday</span><span class="op">(</span><span class="va">gtfs</span>, weekday <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"monday"</span>, <span class="st">"sunday"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span><span class="op">$</span><span class="va">calendar</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"service_id"</span>, <span class="st">"monday"</span>, <span class="st">"sunday"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     service_id monday sunday</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;char&gt;  &lt;int&gt;  &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:        USD      1      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:        U__      1      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:        US_      1      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:        _SD      0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:        __D      0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:        USD      1      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:        U__      1      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:        US_      1      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:        _SD      0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:        __D      0      1</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/object.size.html" class="external-link">object.size</a></span><span class="op">(</span><span class="va">smaller_gtfs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 811248 bytes</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># keeps entries related to services than run on monday AND on sunday</span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span> <span class="op">&lt;-</span> <span class="fu">filter_by_weekday</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gtfs</span>,</span></span>
<span class="r-in"><span>  weekday <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"monday"</span>, <span class="st">"sunday"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  combine <span class="op">=</span> <span class="st">"and"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span><span class="op">$</span><span class="va">calendar</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"service_id"</span>, <span class="st">"monday"</span>, <span class="st">"sunday"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    service_id monday sunday</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;char&gt;  &lt;int&gt;  &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        USD      1      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:        USD      1      1</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/object.size.html" class="external-link">object.size</a></span><span class="op">(</span><span class="va">smaller_gtfs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 762152 bytes</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># drops entries related to services than run EITHER on monday OR on sunday</span></span></span>
<span class="r-in"><span><span class="co"># the resulting gtfs shouldn't include any trips running on these days</span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span> <span class="op">&lt;-</span> <span class="fu">filter_by_weekday</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gtfs</span>,</span></span>
<span class="r-in"><span>  weekday <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"monday"</span>, <span class="st">"sunday"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  keep <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span><span class="op">$</span><span class="va">calendar</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"service_id"</span>, <span class="st">"monday"</span>, <span class="st">"sunday"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    service_id monday sunday</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;char&gt;  &lt;int&gt;  &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:        _S_      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:        _S_      0      0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/object.size.html" class="external-link">object.size</a></span><span class="op">(</span><span class="va">smaller_gtfs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19168 bytes</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># drops entries related to services than run on monday AND on sunday</span></span></span>
<span class="r-in"><span><span class="co"># the resulting gtfs may include trips that run on these days, but no trips</span></span></span>
<span class="r-in"><span><span class="co"># that run on both these days</span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span> <span class="op">&lt;-</span> <span class="fu">filter_by_weekday</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gtfs</span>,</span></span>
<span class="r-in"><span>  weekday <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"monday"</span>, <span class="st">"sunday"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  combine <span class="op">=</span> <span class="st">"and"</span>,</span></span>
<span class="r-in"><span>  keep <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span><span class="op">$</span><span class="va">calendar</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"service_id"</span>, <span class="st">"monday"</span>, <span class="st">"sunday"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     service_id monday sunday</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;char&gt;  &lt;int&gt;  &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  1:        U__      1      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  2:        US_      1      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3:        _SD      0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  4:        __D      0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  5:        _S_      0      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  6:        U__      1      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  7:        US_      1      0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  8:        _SD      0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  9:        __D      0      1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10:        _S_      0      0</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/object.size.html" class="external-link">object.size</a></span><span class="op">(</span><span class="va">smaller_gtfs</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 69880 bytes</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Daniel Herszenhut, Rafael H. M. Pereira, Pedro R. Andrade, Joao Bazzo, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

