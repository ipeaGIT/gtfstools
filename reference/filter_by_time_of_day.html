<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Filter GTFS object by time of day — filter_by_time_of_day • gtfstools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Filter GTFS object by time of day — filter_by_time_of_day"><meta property="og:description" content="Filters a GTFS object by time of day, keeping (or dropping) the relevant
entries in each file. Please see the details section for more information on
how this function filters the frequencies and stop_times tables, as well
as how it handles stop_times tables that contain trips with some empty
departure and arrival times."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gtfstools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.2.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/gtfstools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/filtering.html">Filtering GTFS feeds</a>
    </li>
    <li>
      <a href="../articles/validating.html">Validating GTFS feeds</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/ipeaGIT/gtfstools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Filter GTFS object by time of day</h1>
    <small class="dont-index">Source: <a href="https://github.com/ipeaGIT/gtfstools/blob/master/R/filter_by_time_of_day.R" class="external-link"><code>R/filter_by_time_of_day.R</code></a></small>
    <div class="hidden name"><code>filter_by_time_of_day.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Filters a GTFS object by time of day, keeping (or dropping) the relevant
entries in each file. Please see the details section for more information on
how this function filters the <code>frequencies</code> and <code>stop_times</code> tables, as well
as how it handles <code>stop_times</code> tables that contain trips with some empty
departure and arrival times.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">filter_by_time_of_day</span><span class="op">(</span></span>
<span>  <span class="va">gtfs</span>,</span>
<span>  <span class="va">from</span>,</span>
<span>  <span class="va">to</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  full_trips <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  update_frequencies <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-gtfs">gtfs<a class="anchor" aria-label="anchor" href="#arg-gtfs"></a></dt>
<dd><p>A GTFS object, as created by <code><a href="read_gtfs.html">read_gtfs()</a></code>.</p></dd>


<dt id="arg-from">from<a class="anchor" aria-label="anchor" href="#arg-from"></a></dt>
<dd><p>A string. The starting point of the time of day, in the
"HH:MM:SS" format.</p></dd>


<dt id="arg-to">to<a class="anchor" aria-label="anchor" href="#arg-to"></a></dt>
<dd><p>A string. The ending point of the time of day, in the "HH:MM:SS"
format.</p></dd>


<dt id="arg-keep">keep<a class="anchor" aria-label="anchor" href="#arg-keep"></a></dt>
<dd><p>A logical. Whether the entries related to the specified time of
day should be kept or dropped (defaults to <code>TRUE</code>, which keeps the entries).</p></dd>


<dt id="arg-full-trips">full_trips<a class="anchor" aria-label="anchor" href="#arg-full-trips"></a></dt>
<dd><p>A logical. Whether trips should be treated as immutable
blocks or each of its stops should be considered separately when filtering
the <code>stop_times</code> table (defaults to <code>FALSE</code>, which considers each stop
individually). Please check the details section for more information on how
this parameter changes the function behaviour.</p></dd>


<dt id="arg-update-frequencies">update_frequencies<a class="anchor" aria-label="anchor" href="#arg-update-frequencies"></a></dt>
<dd><p>A logical. Whether the <code>frequencies</code> table should
have its <code>start_time</code> and <code>end_time</code> fields updated to fit inside/outside the
specified time of day (defaults to <code>FALSE</code>, which doesn't update the fields).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>The GTFS object passed to the <code>gtfs</code> parameter, after the filtering
process.</p>
    </div>
    <div id="details">
    <h2>Details</h2>


<p>When filtering the <code>frequencies</code> table, <code>filter_by_time_of_day()</code> respects
the <code>exact_times</code> field. This field indicates whether the service follows a
fixed schedule throughout the day or not. If it's 0 (or if it's not
present), the service does not follow a fixed schedule. Instead, the
operators try to maintain the listed headways. In such cases, if
<code>update_frequencies</code> is <code>TRUE</code> we just update <code>start_time</code> and <code>end_time</code> to
the appropriate value of <code>from</code> or <code>to</code> (which of this value is used depends
on <code>keep</code>).</p>
<p>If <code>exact_times</code> is 1, however, operators try to strictly adhere to the start
times and headway. As a result, when updating the <code>start_time</code> field we need
to follow the listed headway. For example, take a trip that has its start
time listed as 06:00:00, its end time listed as 08:00:00 and its headway
listed as 300 secs (5 minutes). If you decide to filter the feed to keep the
time of day between 06:32:00 and 08:00:00 while updating <code>frequencies</code>, the
<code>start_time</code> field must be updated to 06:35:00 in order to preserve the
correct departure times of this trips, instead of simply updating it to
06:32:00.</p>
<p>Another things to keep an eye on when filtering the <code>frequencies</code> table is
that the corresponding <code>stop_times</code> entries of trips listed in the
<code>frequencies</code> table should not be filtered, even if their departure and
arrival times fall outside the specified time of day. This is because the
<code>stop_times</code> entries of <code>frequencies</code>' trips are just templates that describe
how long a segment between two stops takes, so the departure and arrival
times listed there do not actually represent the actual departure and
arrival times seen in practice. Taking the same example listed above, the
corresponding <code>stop_times</code> entries of that trip could describe a departure
from the first stop at 12:00:00 and an arrival at the second stop at
12:03:00. That doesn't mean the trip will actually leave and arrive at the
stops at these times, but rather that it takes 3 minutes to get from the
first to the second stop. So when the trip departs from the first stop at
06:35:00, it will get to the second at 06:38:00.</p>
<p>When filtering the <code>stop_times</code> table, a few other details should be
observed. First, one could wish to filter a GTFS object in order to keep all
trips that cross a given time of day, whereas others may want to keep only
the specific entries that fall inside the specified time of day. For
example, take a trip that leaves the first stop at 06:30:00, gets to the
second at 06:35:00 and then gets to the third at 06:45:00. When filtering to
keep entire trips that cross the time of day between 06:30:00 and 06:40:00,
all three stops will have to be kept. If, however, you want to keep only the
entries that fall within the specified time of day, only the first two
should be kept. To control such behaviour you need to set the <code>full_trips</code>
parameter. When it's <code>TRUE</code>, the function behaves like the first case, and
when it's <code>FALSE</code>, like the second.</p>
<p>When using <code>full_trips</code> in conjunction with <code>keep</code>, please note how their
behaviour stack. When both are <code>TRUE</code>, trips are always fully kept. When
<code>keep</code> is <code>FALSE</code>, however, trips are fully dropped, even if some of their
stops are visited outside the specified time of day.</p>
<p>Finally, please note that many GTFS feeds may contain <code>stop_times</code> entries
with empty departure and arrival times. In such cases, filtering by time of
day with <code>full_trips</code> as <code>FALSE</code> will drop the entries with empty times.
Please set <code>full_trips</code> to <code>TRUE</code> to preserve these entries.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other filtering functions:
<code><a href="filter_by_agency_id.html">filter_by_agency_id</a>()</code>,
<code><a href="filter_by_route_id.html">filter_by_route_id</a>()</code>,
<code><a href="filter_by_route_type.html">filter_by_route_type</a>()</code>,
<code><a href="filter_by_service_id.html">filter_by_service_id</a>()</code>,
<code><a href="filter_by_sf.html">filter_by_sf</a>()</code>,
<code><a href="filter_by_shape_id.html">filter_by_shape_id</a>()</code>,
<code><a href="filter_by_spatial_extent.html">filter_by_spatial_extent</a>()</code>,
<code><a href="filter_by_stop_id.html">filter_by_stop_id</a>()</code>,
<code><a href="filter_by_trip_id.html">filter_by_trip_id</a>()</code>,
<code><a href="filter_by_weekday.html">filter_by_weekday</a>()</code></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">data_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata/spo_gtfs.zip"</span>, package <span class="op">=</span> <span class="st">"gtfstools"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">gtfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="read_gtfs.html">read_gtfs</a></span><span class="op">(</span><span class="va">data_path</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># taking a look at the original frequencies and stop_times</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">gtfs</span><span class="op">$</span><span class="va">frequencies</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       trip_id start_time end_time headway_secs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;char&gt;     &lt;char&gt;   &lt;char&gt;        &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: CPTM L07-0   04:00:00 04:59:00          720</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: CPTM L07-0   05:00:00 05:59:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: CPTM L07-0   06:00:00 06:59:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: CPTM L07-0   07:00:00 07:59:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: CPTM L07-0   08:00:00 08:59:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: CPTM L07-0   09:00:00 09:59:00          480</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">gtfs</span><span class="op">$</span><span class="va">stop_times</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       trip_id arrival_time departure_time stop_id stop_sequence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;char&gt;       &lt;char&gt;         &lt;char&gt;  &lt;char&gt;         &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: CPTM L07-0     04:00:00       04:00:00   18940             1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: CPTM L07-0     04:08:00       04:08:00   18920             2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: CPTM L07-0     04:16:00       04:16:00   18919             3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: CPTM L07-0     04:24:00       04:24:00   18917             4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: CPTM L07-0     04:32:00       04:32:00   18916             5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: CPTM L07-0     04:40:00       04:40:00   18965             6</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span> <span class="op">&lt;-</span> <span class="fu">filter_by_time_of_day</span><span class="op">(</span><span class="va">gtfs</span>, <span class="st">"05:00:00"</span>, <span class="st">"06:00:00"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># filter_by_time_of_day filters the frequencies table but doesn't filter the</span></span></span>
<span class="r-in"><span><span class="co"># stop_times table because they're just templates</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">smaller_gtfs</span><span class="op">$</span><span class="va">frequencies</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       trip_id start_time end_time headway_secs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;char&gt;     &lt;char&gt;   &lt;char&gt;        &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: CPTM L07-0   05:00:00 05:59:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: CPTM L07-1   05:00:00 05:59:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: CPTM L08-0   05:00:00 05:59:00          480</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: CPTM L08-1   05:00:00 05:59:00          480</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: CPTM L09-0   05:00:00 05:59:00          480</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: CPTM L09-1   05:00:00 05:59:00          480</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">smaller_gtfs</span><span class="op">$</span><span class="va">stop_times</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       trip_id arrival_time departure_time stop_id stop_sequence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;char&gt;       &lt;char&gt;         &lt;char&gt;  &lt;char&gt;         &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: CPTM L07-0     04:00:00       04:00:00   18940             1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: CPTM L07-0     04:08:00       04:08:00   18920             2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: CPTM L07-0     04:16:00       04:16:00   18919             3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: CPTM L07-0     04:24:00       04:24:00   18917             4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: CPTM L07-0     04:32:00       04:32:00   18916             5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: CPTM L07-0     04:40:00       04:40:00   18965             6</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># frequencies entries can be adjusted using update_frequencies = TRUE</span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span> <span class="op">&lt;-</span> <span class="fu">filter_by_time_of_day</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gtfs</span>,</span></span>
<span class="r-in"><span>  <span class="st">"05:30:00"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"06:00:00"</span>,</span></span>
<span class="r-in"><span>  update_frequencies <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">smaller_gtfs</span><span class="op">$</span><span class="va">frequencies</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       trip_id start_time end_time headway_secs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;char&gt;     &lt;char&gt;   &lt;char&gt;        &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: CPTM L07-0   05:30:00 05:59:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: CPTM L07-1   05:30:00 05:59:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: CPTM L08-0   05:30:00 05:59:00          480</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: CPTM L08-1   05:30:00 05:59:00          480</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: CPTM L09-0   05:30:00 05:59:00          480</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: CPTM L09-1   05:30:00 05:59:00          480</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># when keep = FALSE, the behaviour of the function in general, and of</span></span></span>
<span class="r-in"><span><span class="co"># update_frequencies in particular, is a bit different</span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span> <span class="op">&lt;-</span> <span class="fu">filter_by_time_of_day</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gtfs</span>,</span></span>
<span class="r-in"><span>  <span class="st">"05:30:00"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"06:00:00"</span>,</span></span>
<span class="r-in"><span>  keep <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  update_frequencies <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">smaller_gtfs</span><span class="op">$</span><span class="va">frequencies</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       trip_id start_time end_time headway_secs</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;char&gt;     &lt;char&gt;   &lt;char&gt;        &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: CPTM L07-0   04:00:00 04:59:00          720</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: CPTM L07-0   05:00:00 05:30:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: CPTM L07-0   06:00:00 06:59:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: CPTM L07-0   07:00:00 07:59:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: CPTM L07-0   08:00:00 08:59:00          360</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: CPTM L07-0   09:00:00 09:59:00          480</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># let's remove the frequencies table to check the behaviour of full_trips</span></span></span>
<span class="r-in"><span><span class="va">gtfs</span><span class="op">$</span><span class="va">frequencies</span> <span class="op">&lt;-</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span> <span class="op">&lt;-</span> <span class="fu">filter_by_time_of_day</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gtfs</span>,</span></span>
<span class="r-in"><span>  <span class="st">"05:30:00"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"06:00:00"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">smaller_gtfs</span><span class="op">$</span><span class="va">stop_times</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       trip_id arrival_time departure_time stop_id stop_sequence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;char&gt;       &lt;char&gt;         &lt;char&gt;  &lt;char&gt;         &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: CPTM L07-0     05:36:00       05:36:00   18926            13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: CPTM L07-0     05:44:00       05:44:00   18971            14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: CPTM L07-0     05:52:00       05:52:00   18972            15</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: CPTM L07-0     06:00:00       06:00:00   18973            16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: CPTM L07-1     05:36:00       05:36:00   18965            13</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: CPTM L07-1     05:44:00       05:44:00   18916            14</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">smaller_gtfs</span> <span class="op">&lt;-</span> <span class="fu">filter_by_time_of_day</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">gtfs</span>,</span></span>
<span class="r-in"><span>  <span class="st">"05:30:00"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"06:00:00"</span>,</span></span>
<span class="r-in"><span>  full_trips <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">smaller_gtfs</span><span class="op">$</span><span class="va">stop_times</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       trip_id arrival_time departure_time stop_id stop_sequence</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;char&gt;       &lt;char&gt;         &lt;char&gt;  &lt;char&gt;         &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1: CPTM L07-0     04:00:00       04:00:00   18940             1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: CPTM L07-0     04:08:00       04:08:00   18920             2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3: CPTM L07-0     04:16:00       04:16:00   18919             3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4: CPTM L07-0     04:24:00       04:24:00   18917             4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5: CPTM L07-0     04:32:00       04:32:00   18916             5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6: CPTM L07-0     04:40:00       04:40:00   18965             6</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Daniel Herszenhut, Rafael H. M. Pereira, Pedro R. Andrade, Joao Bazzo, Ipea - Institute for Applied Economic Research.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

